# ChainReactions Backend Scripts

è¿™ä¸ªç›®å½•åŒ…å«äº†ChainReactions Backendé¡¹ç›®çš„å®ç”¨è„šæœ¬ï¼Œç”¨äºéƒ¨ç½²ã€ç›‘æ§å’Œç»´æŠ¤ã€‚

## ğŸ“‹ è„šæœ¬åˆ—è¡¨

### ğŸš€ éƒ¨ç½²è„šæœ¬

#### `deploy.sh`
**ç”¨é€”**: å®Œæ•´çš„Dockeréƒ¨ç½²æµç¨‹
**åŠŸèƒ½**:
- æ„å»ºå’Œå¯åŠ¨æ‰€æœ‰6ä¸ªå¾®æœåŠ¡
- é…ç½®Redisç¼“å­˜
- éªŒè¯éƒ¨ç½²æˆåŠŸ
- æä¾›éƒ¨ç½²çŠ¶æ€æ£€æŸ¥

**ç”¨æ³•**:
```bash
./scripts/deploy.sh
```

**è¦æ±‚**: Dockerå’Œdocker-composeå·²å®‰è£…

---

### ğŸ” éªŒè¯è„šæœ¬

#### `verify-deployment.sh`
**ç”¨é€”**: éƒ¨ç½²å‰é…ç½®éªŒè¯
**åŠŸèƒ½**:
- æ£€æŸ¥å¿…éœ€æ–‡ä»¶å­˜åœ¨æ€§
- éªŒè¯Dockerfileç«¯å£é…ç½®
- æ£€æŸ¥docker-compose.ymlé…ç½®
- éªŒè¯Rediså®‰å…¨é…ç½®
- æ£€æŸ¥æœåŠ¡ç›®å½•ç»“æ„

**ç”¨æ³•**:
```bash
./scripts/verify-deployment.sh
```

**é€‚ç”¨åœºæ™¯**: éƒ¨ç½²å‰é¢„æ£€ï¼Œç¡®ä¿é…ç½®æ­£ç¡®

---

### ğŸ“Š ç›‘æ§è„šæœ¬

#### `monitor-services.sh`
**ç”¨é€”**: å®æ—¶æœåŠ¡ç›‘æ§
**åŠŸèƒ½**:
- æ˜¾ç¤ºæ‰€æœ‰å¾®æœåŠ¡è¿è¡ŒçŠ¶æ€
- æä¾›èµ„æºä½¿ç”¨æƒ…å†µ
- å½©è‰²è¾“å‡ºï¼Œç”¨æˆ·ä½“éªŒå‹å¥½
- å®æ—¶å¥åº·æ£€æŸ¥

**ç”¨æ³•**:
```bash
./scripts/monitor-services.sh
```

**è¾“å‡ºç¤ºä¾‹**:
```
Service Status Overview:
============================
Running â€¢ entity-relations (3002)
Running â€¢ entity-search (3003)
Running â€¢ dataset-matching (3004)
Running â€¢ data-management (3005)
Stopped â€¢ dataset-search (3006)
Stopped â€¢ user-management (3007)
```

---

### ğŸ”§ å·¥å…·è„šæœ¬

#### `check-env.sh`
**ç”¨é€”**: ç¯å¢ƒå˜é‡éªŒè¯
**åŠŸèƒ½**:
- éªŒè¯.envæ–‡ä»¶å­˜åœ¨æ€§
- æ£€æŸ¥å¿…éœ€ç¯å¢ƒå˜é‡
- éªŒè¯å˜é‡æ ¼å¼å’Œå€¼
- æä¾›ç¼ºå¤±å˜é‡çš„é…ç½®æŒ‡å¯¼

**ç”¨æ³•**:
```bash
./scripts/check-env.sh
```

**å¿…éœ€å˜é‡**:
- GEMINI_API_KEY
- BRIGHT_DATA_API_KEY
- BRIGHT_DATA_SERP_ZONE
- SUPABASE_URL
- SUPABASE_ANON_KEY
- SUPABASE_SERVICE_ROLE_KEY
- LINKUP_API_KEY
- LINKUP_BASE_URL

---

#### `reset-redis.sh`
**ç”¨é€”**: Redisé‡ç½®å’Œæ•…éšœæ’é™¤
**åŠŸèƒ½**:
- é‡å¯RedisæœåŠ¡
- æ¸…é™¤Redisæ•°æ®å·
- é‡ç½®Redisé…ç½®
- ä¿®å¤å†…å­˜é…ç½®é—®é¢˜

**ç”¨æ³•**:
```bash
./scripts/reset-redis.sh
```

**é€‚ç”¨åœºæ™¯**: Redisæ•…éšœã€é…ç½®é—®é¢˜ã€å†…å­˜è­¦å‘Š

---

## ğŸ› ï¸ ä½¿ç”¨å»ºè®®

### å¼€å‘ç¯å¢ƒ
1. **ç¯å¢ƒå‡†å¤‡**: ä½¿ç”¨ `check-env.sh` éªŒè¯ç¯å¢ƒå˜é‡
2. **æœåŠ¡ç›‘æ§**: ä½¿ç”¨ `monitor-services.sh` ç›‘æ§æœåŠ¡çŠ¶æ€
3. **æ•…éšœæ’é™¤**: ä½¿ç”¨ `reset-redis.sh` è§£å†³Redisé—®é¢˜

### ç”Ÿäº§éƒ¨ç½²
1. **é¢„æ£€æŸ¥**: ä½¿ç”¨ `verify-deployment.sh` éªŒè¯é…ç½®
2. **éƒ¨ç½²**: ä½¿ç”¨ `deploy.sh` æ‰§è¡Œå®Œæ•´éƒ¨ç½²
3. **ç›‘æ§**: éƒ¨ç½²åä½¿ç”¨ `monitor-services.sh` ç›‘æ§æœåŠ¡

### æ•…éšœæ’é™¤
- **ç¯å¢ƒå˜é‡é—®é¢˜**: ä½¿ç”¨ `check-env.sh` æ£€æŸ¥é…ç½®
- **Redisé—®é¢˜**: ä½¿ç”¨ `reset-redis.sh` é‡ç½®æœåŠ¡
- **æœåŠ¡çŠ¶æ€**: ä½¿ç”¨ `monitor-services.sh` æ£€æŸ¥è¿è¡ŒçŠ¶æ€

## ğŸ“‹ è„šæœ¬è¦æ±‚

### ç³»ç»Ÿè¦æ±‚
- Linux/macOSæ“ä½œç³»ç»Ÿ
- Bash shellç¯å¢ƒ
- Dockerå’Œdocker-compose (ä»…éƒ¨ç½²è„šæœ¬)

### æƒé™è¦æ±‚
æ‰€æœ‰è„šæœ¬éœ€è¦æ‰§è¡Œæƒé™ï¼š
```bash
chmod +x scripts/*.sh
```

### ä¾èµ–é¡¹
- **Docker**: éƒ¨ç½²å’ŒRedisè„šæœ¬éœ€è¦
- **curl**: å¥åº·æ£€æŸ¥åŠŸèƒ½
- **docker-compose**: æœåŠ¡ç¼–æ’

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒå˜é‡**: ç¡®ä¿.envæ–‡ä»¶ä¸è¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
2. **æƒé™ç®¡ç†**: è„šæœ¬æ‰§è¡Œéœ€è¦é€‚å½“çš„æ–‡ä»¶æƒé™
3. **ç½‘ç»œå®‰å…¨**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨é˜²ç«å¢™å’ŒSSL

## ğŸ“ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**è„šæœ¬æ‰§è¡Œæƒé™é”™è¯¯**:
```bash
chmod +x scripts/*.sh
```

**Dockeræœªè¿è¡Œ**:
```bash
# macOS
docker-machine restart default
eval $(docker-machine env default)

# Linux
sudo systemctl start docker
```

**ç¯å¢ƒå˜é‡ç¼ºå¤±**:
```bash
# ä»æ¨¡æ¿åˆ›å»º
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶æ·»åŠ å¿…è¦å˜é‡
```

---

*æœ€åæ›´æ–°: 2025å¹´11æœˆ30æ—¥*